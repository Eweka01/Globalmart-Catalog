version: 0.2

env:
  runtime-versions:
    nodejs: 16

phases:
  install:
    commands:
      - node -v || true
      - npm -v || true
      - |
        if ! node -v 2>/dev/null | grep -qE '^v16\.'; then
          curl -fsSL https://rpm.nodesource.com/setup_16.x | bash -
          yum install -y nodejs
        fi
      - npm ci
  build:
    commands:
      - npm run build

artifacts:
  files:
    - appspec.yml
    - scripts/**/*
    - build/**/*